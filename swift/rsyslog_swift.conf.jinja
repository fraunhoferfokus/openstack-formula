# Uncomment the following to have a log containing all logs together
{% if salt['pillar.get']('swift:logging:all_in_one', False) %}
#{% endif %}local1,local2,local3,local4,local5.*   /var/log/swift/all.log

# Uncomment the following to have hourly proxy logs for stats processing
{% if salt['pillar.get']('swift:logging:hourly_logs', False) %}
$template HourlyProxyLog,"/var/log/swift/hourly/%$YEAR%-%$MONTH%-%$DAY%_%$HOUR%"
local1.*;local1.!notice ?HourlyProxyLog
{% else %}
#$template HourlyProxyLog,"/var/log/swift/hourly/%$YEAR%-%$MONTH%-%$DAY%_%$HOUR%"
#local1.*;local1.!notice ?HourlyProxyLog
{% endif %}
{% if salt['grains.get']('id') in salt['pillar.get']('swift:nodes:proxy',[]) %}
local1.*;local1.!notice /var/log/swift/proxy.log
local1.notice           /var/log/swift/proxy.error
local1.*                ~
{% endif %}
{% if salt['grains.get']('id') in salt['pillar.get']('swift:nodes:storage',[]) %}
local2.*;local2.!notice /var/log/swift/storage1.log
local2.notice           /var/log/swift/storage1.error
local2.*                ~

local3.*;local3.!notice /var/log/swift/storage2.log
local3.notice           /var/log/swift/storage2.error
local3.*                ~

local4.*;local4.!notice /var/log/swift/storage3.log
local4.notice           /var/log/swift/storage3.error
local4.*                ~

local5.*;local5.!notice /var/log/swift/storage4.log
local5.notice           /var/log/swift/storage4.error
local5.*                ~

local6.*;local6.!notice /var/log/swift/expirer.log
local6.notice           /var/log/swift/expirer.error
local6.*                ~
{% endif %}
